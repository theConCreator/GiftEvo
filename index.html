<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Web App Game</title>
    <style>
        /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #1a1a1a; /* –¢–µ–º–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è */
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #game-container {
            width: 100%;
            max-width: 600px; /* –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
            height: 100vh; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é –≤—ã—Å–æ—Ç—É –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏ */
            overflow-y: scroll; /* –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è "–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π" –∞—Ä–µ–Ω—ã */
            border-left: 2px solid #555;
            border-right: 2px solid #555;
            position: relative; /* –î–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∏—Ä–∫–∏ –∏ –±–ª–æ–∫–æ–≤ */
        }

        #arena {
            display: grid;
            /* 6 –∫–æ–ª–æ–Ω–æ–∫ –¥–ª—è –±–ª–æ–∫–æ–≤ + 2 –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è —Å—Ç–µ–Ω */
            grid-template-columns: 1fr repeat(6, 40px) 1fr; 
            grid-auto-rows: 40px; /* –í—ã—Å–æ—Ç–∞ –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ */
            padding-top: 10px;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –±–æ–∫–æ–≤—ã—Ö "—Å—Ç–µ–Ω" */
        .wall {
            background-color: #333;
            border: 1px solid #444;
            grid-column: 1 / 2; /* –ü–µ—Ä–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ */
        }
        .wall.right {
            grid-column: 8 / 9; /* –ü–æ—Å–ª–µ–¥–Ω—è—è –∫–æ–ª–æ–Ω–∫–∞ */
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –±–ª–æ–∫–∞ (–∑–∞–≥–ª—É—à–∫–∞) */
        .block {
            width: 40px;
            height: 40px;
            border: 1px solid black;
            box-sizing: border-box;
            text-align: center;
            line-height: 38px;
            font-size: 10px;
            cursor: pointer;
            transition: background-color 0.1s;
        }

        .block:hover {
            opacity: 0.8;
        }
        
        /* –ü—Ä–∏–º–µ—Ä—ã —Ü–≤–µ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –±–ª–æ–∫–æ–≤ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Ä–∞—Å—à–∏—Ä–∏—Ç—å) */
        .block-dirt { background-color: #8b572a; }
        .block-stone { background-color: #808080; }
        .block-diamond { background-color: #4682b4; } /* –ë–ª–æ–∫ —Å –ø—Ä–∏–∑–æ–º */

        /* –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        #controls {
            padding: 10px;
            width: 100%;
            max-width: 600px;
            background-color: #2b2b2b;
            text-align: center;
            position: fixed; /* –ó–∞–∫—Ä–µ–ø–ª—è–µ–º –≤–Ω–∏–∑—É */
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
        }

        .pickaxe-button {
            padding: 10px 15px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="arena">
            </div>
    </div>

    <div id="controls">
        <h3>üí∞ –í–∞—à–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞: <span id="balance">1000</span></h3>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∏—Ä–∫—É –¥–ª—è –ø–æ–∫—É–ø–∫–∏:</p>
        <button class="pickaxe-button" data-type="wood" data-price="100">–î–µ—Ä–µ–≤—è–Ω–Ω–∞—è (100)</button>
        <button class="pickaxe-button" data-type="iron" data-price="500">–ñ–µ–ª–µ–∑–Ω–∞—è (500)</button>
        <button class="pickaxe-button" data-type="diamond" data-price="2000">–ê–ª–º–∞–∑–Ω–∞—è (2000)</button>
        <p id="message"></p>
    </div>
    
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        // –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –≤–∞–∂–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API
        const Telegram = window.Telegram.WebApp;
        Telegram.ready();
        
        const ARENA_WIDTH_BLOCKS = 6;
        const BLOCK_SIZE_PX = 40;
        const arena = document.getElementById('arena');
        const balanceElement = document.getElementById('balance');
        const messageElement = document.getElementById('message');
        
        let playerBalance = 1000;
        let blocksData = []; // –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –±–ª–æ–∫–∞—Ö
        
        // --- 1. –§–£–ù–ö–¶–ò–Ø –ì–ï–ù–ï–†–ê–¶–ò–ò –ê–†–ï–ù–´ ---
        
        function generateInitialArena(rows) {
            for (let r = 0; r < rows; r++) {
                // –°–æ–∑–¥–∞–µ–º –±–æ–∫–æ–≤—É—é —Å—Ç–µ–Ω—É —Å–ª–µ–≤–∞
                const wallLeft = document.createElement('div');
                wallLeft.className = 'wall left';
                arena.appendChild(wallLeft);
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º 6 –∫–æ–ª–æ–Ω–æ–∫ –±–ª–æ–∫–æ–≤
                for (let c = 0; c < ARENA_WIDTH_BLOCKS; c++) {
                    const block = document.createElement('div');
                    
                    // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞: 10% —à–∞–Ω—Å –Ω–∞ –±–ª–æ–∫ —Å –ø—Ä–∏–∑–æ–º
                    const blockType = Math.random() < 0.1 ? 'diamond' : (Math.random() < 0.6 ? 'dirt' : 'stone');
                    
                    block.className = `block block-${blockType}`;
                    block.textContent = blockType.toUpperCase();
                    block.dataset.row = r;
                    block.dataset.col = c;
                    
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
                    // –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ ID –±–ª–æ–∫–∞ –∏ –µ–≥–æ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏.
                    
                    arena.appendChild(block);
                }
                
                // –°–æ–∑–¥–∞–µ–º –±–æ–∫–æ–≤—É—é —Å—Ç–µ–Ω—É —Å–ø—Ä–∞–≤–∞
                const wallRight = document.createElement('div');
                wallRight.className = 'wall right';
                arena.appendChild(wallRight);
            }
        }
        
        // --- 2. –õ–û–ì–ò–ö–ê –ü–û–ö–£–ü–ö–ò –ö–ò–†–ö–ò (–í—Ä–µ–º–µ–Ω–Ω–∞—è) ---
        
        document.querySelectorAll('.pickaxe-button').forEach(button => {
            button.addEventListener('click', () => {
                const price = parseInt(button.dataset.price);
                const type = button.dataset.type;
                
                if (playerBalance >= price) {
                    playerBalance -= price;
                    balanceElement.textContent = playerBalance;
                    
                    messageElement.textContent = `–í—ã –∫—É–ø–∏–ª–∏ ${type} –∫–∏—Ä–∫—É –∑–∞ ${price}. –¢–µ–ø–µ—Ä—å –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –±–ª–æ–∫—É!`;
                    
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                    // –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ ID –∫—É–ø–ª–µ–Ω–Ω–æ–π –∫–∏—Ä–∫–∏.
                    activateMiningMode(type);
                } else {
                    messageElement.textContent = `–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤. –í–∞–º –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç ${price - playerBalance}.`;
                }
            });
        });
        
        // --- 3. –†–ï–ñ–ò–ú –ö–û–ü–ê–ù–ò–Ø (–ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞) ---
        
        let activePickaxe = null;

        function activateMiningMode(type) {
            activePickaxe = {
                type: type,
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ, —Ñ–∏–∑–∏–∫–∞ –∏ –ø—Ä–æ—á–Ω–æ—Å—Ç—å –±—É–¥—É—Ç –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
                power: type === 'wood' ? 1 : (type === 'iron' ? 3 : 10)
            };
            arena.style.cursor = 'crosshair'; // –ú–µ–Ω—è–µ–º –∫—É—Ä—Å–æ—Ä
            
            // –í—Ä–µ–º–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª–µ–π, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
            document.querySelectorAll('.block').forEach(block => {
                block.removeEventListener('click', handleBlockClick);
                block.addEventListener('click', handleBlockClick);
            });
        }
        
        function handleBlockClick(event) {
            if (!activePickaxe) {
                messageElement.textContent = '–°–Ω–∞—á–∞–ª–∞ –∫—É–ø–∏—Ç–µ –∫–∏—Ä–∫—É!';
                return;
            }
            
            const blockElement = event.currentTarget;
            
            // --- –°–ò–ú–£–õ–Ø–¶–ò–Ø –õ–û–ú–ê–ù–ò–Ø –ë–õ–û–ö–ê (–í–†–ï–ú–ï–ù–ù–û) ---
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ, –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ ID –∫–∏—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
            // Telegram.sendData(JSON.stringify({ 
            //     action: 'mine', 
            //     row: blockElement.dataset.row, 
            //     col: blockElement.dataset.col, 
            //     pickaxe: activePickaxe.type 
            // }));
            
            // –ó–∞–≥–ª—É—à–∫–∞: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ª–æ–º–∞–µ–º –±–ª–æ–∫
            const isPrizeBlock = blockElement.classList.contains('block-diamond');
            
            if (isPrizeBlock) {
                messageElement.textContent = `üéâ –ü–û–ë–ï–î–ê! –í—ã —Å–ª–æ–º–∞–ª–∏ ${blockElement.textContent} –∏ –∑–∞–±—Ä–∞–ª–∏ –ø—Ä–∏–∑!`;
                // –ó–¥–µ—Å—å –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä
            } else {
                messageElement.textContent = `‚õèÔ∏è –í—ã —É–¥–∞—Ä–∏–ª–∏ –ø–æ –±–ª–æ–∫—É ${blockElement.textContent}. –û–∂–∏–¥–∞–µ–º –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏.`;
            }

            blockElement.style.opacity = 0; // –ò–º–∏—Ç–∞—Ü–∏—è —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è
            setTimeout(() => blockElement.remove(), 300); // –£–¥–∞–ª—è–µ–º –±–ª–æ–∫ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            
            activePickaxe = null; // –ö–∏—Ä–∫–∞ "–ø—Ä—ã–≥–Ω—É–ª–∞" –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ (–∏–ª–∏ –ø—Ä–∏–∑–µ–º–ª–∏–ª–∞—Å—å)
            arena.style.cursor = 'default';
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–∞—á–∞–ª—å–Ω–æ–π –∞—Ä–µ–Ω—ã
        generateInitialArena(30); // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º 30 —Ä—è–¥–æ–≤ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
    </script>
</body>
</html>