<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Gift Evolution</title>
<style>
  :root {
    --neon-pink: #ff4dff;
    --neon-blue: #00ffff;
    --neon-purple: #a855f7;
    --bg-dark: #0a0a0a;
  }

  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: var(--bg-dark);
    font-family: "Inter", sans-serif;
    color: #fff;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .app {
    width: 100%;
    max-width: 480px;
    height: 100vh;
    max-height: 850px;
    background: radial-gradient(circle at 20% 20%, #111, #000);
    border-radius: 16px;
    overflow: hidden;
    position: relative;
    display: flex;
    flex-direction: column;
  }

  .top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    font-weight: 600;
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(8px);
  }

  .balance {
    padding: 6px 10px;
    border-radius: 10px;
    background: linear-gradient(90deg, var(--neon-pink), var(--neon-blue));
    color: black;
    font-weight: bold;
  }

  .main {
    flex: 1;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    position: relative;
    padding: 12px;
  }

  .effects {
    position: absolute;
    bottom: 70px;
    left: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    width: 60%;
  }

  .effect {
    flex: 1 1 calc(50% - 8px);
    text-align: center;
    background: rgba(255,255,255,0.05);
    border: 1px solid transparent;
    border-radius: 10px;
    padding: 8px;
    cursor: pointer;
    transition: 0.3s;
    font-size: clamp(12px, 3vw, 14px);
  }

  .effect.selected {
    border-image: linear-gradient(45deg, var(--neon-pink), var(--neon-blue)) 1;
    box-shadow: 0 0 12px var(--neon-pink);
  }

  .gifts {
    position: absolute;
    right: 10px;
    bottom: 110px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    align-items: flex-end;
  }

  .gift {
    width: clamp(80px, 22vw, 100px);
    height: clamp(80px, 22vw, 100px);
    border-radius: 14px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.15);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: 0.3s;
    position: relative;
  }

  .gift:hover {
    transform: scale(1.05);
    box-shadow: 0 0 15px var(--neon-blue);
  }

  .gift-btn {
    margin-top: 6px;
    width: 90%;
    padding: 5px;
    border-radius: 8px;
    border: none;
    background: linear-gradient(90deg, var(--neon-pink), var(--neon-blue));
    color: black;
    font-weight: 600;
    cursor: pointer;
    font-size: clamp(10px, 3vw, 13px);
  }

  .combine {
    position: absolute;
    bottom: 12px;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    padding: 12px;
    background: linear-gradient(90deg, var(--neon-pink), var(--neon-blue));
    border: none;
    border-radius: 12px;
    color: black;
    font-weight: bold;
    cursor: pointer;
    font-size: clamp(16px, 4vw, 18px);
  }

  .combine:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .bottom {
    display: flex;
    justify-content: space-around;
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(8px);
  }

  .nav-btn {
    flex: 1;
    text-align: center;
    padding: 12px;
    color: #aaa;
    font-weight: 600;
    cursor: pointer;
    transition: 0.3s;
  }

  .nav-btn.active {
    color: var(--neon-blue);
    text-shadow: 0 0 8px var(--neon-pink);
  }

  .inventory {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 12px;
  }

  .tabs {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 10px;
  }

  .tab {
    padding: 6px 14px;
    border-radius: 8px;
    background: rgba(255,255,255,0.05);
    cursor: pointer;
    transition: 0.3s;
  }

  .tab.active {
    background: linear-gradient(90deg, var(--neon-pink), var(--neon-blue));
    color: black;
    font-weight: bold;
  }

  .inv-list {
    flex: 1;
    overflow-y: auto;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    padding-bottom: 10px;
  }

  .inv-item {
    background: rgba(255,255,255,0.05);
    border-radius: 10px;
    padding: 10px;
    text-align: center;
    transition: 0.3s;
  }

  .inv-item:hover {
    box-shadow: 0 0 10px var(--neon-purple);
  }

  .sell-btn {
    margin-top: 6px;
    padding: 6px;
    border: none;
    border-radius: 8px;
    background: linear-gradient(90deg, #00ff95, #00ffff);
    color: black;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
  }

  .fusion {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    display: flex;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease;
    z-index: 50;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .pulse {
    position: absolute;
    width: 400px;
    height: 400px;
    border-radius: 50%;
    filter: blur(150px);
    animation: pulse 1.2s infinite alternate;
  }

  @keyframes pulse {
    from { transform: scale(0.9); opacity: 0.6; }
    to { transform: scale(1.1); opacity: 1; }
  }

  .result {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    background: rgba(20,20,20,0.9);
    border-radius: 16px;
    border: 2px solid var(--neon-pink);
    padding: 20px;
    text-align: center;
    z-index: 60;
    animation: pop 0.4s ease;
  }

  @keyframes pop {
    from { transform: translate(-50%,-50%) scale(0.7); opacity: 0; }
    to { transform: translate(-50%,-50%) scale(1); opacity: 1; }
  }

  .no-scrollbar::-webkit-scrollbar { display: none; }
</style>
</head>
<body>
<div id="root"></div>

<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
const { useState, useEffect } = React;

const GIFTS = [
  { id: 1, icon: "üéÅ" },
  { id: 2, icon: "üéÄ" },
  { id: 3, icon: "üß∏" },
  { id: 4, icon: "ü™Ñ" },
  { id: 5, icon: "üõçÔ∏è" },
];

const EFFECTS = [
  { name: "–û–≥–æ–Ω—å", icon: "üî•", price: 75, color: "#ff4500" },
  { name: "–ú–æ–ª–Ω–∏—è", icon: "‚ö°", price: 100, color: "#ffd700" },
  { name: "–ö—Ä–æ–≤—å", icon: "ü©∏", price: 125, color: "#8b0000" },
  { name: "–ß—ë—Ä–Ω—ã–π", icon: "‚ö´", price: 200, color: "#4b0082" },
  { name: "–ó–æ–ª–æ—Ç–æ", icon: "ü™ô", price: 250, color: "#ffd700" },
  { name: "Pepe", icon: "üê∏", price: 500, color: "#32cd32" },
];

function App() {
  const [screen, setScreen] = useState("main");
  const [balance, setBalance] = useState(1000);
  const [inventory, setInventory] = useState([]);
  const [selectedGift, setSelectedGift] = useState(null);
  const [selectedEffect, setSelectedEffect] = useState(null);
  const [fusion, setFusion] = useState(null);
  const [result, setResult] = useState(null);
  const [tab, setTab] = useState("–æ–±—ã—á–Ω—ã–µ");

  const countGift = (gift) =>
    inventory.filter((g) => g.model === gift.icon && !g.effect).length;

  const buyGift = (gift) => {
    if (balance < 100) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥!");
    setBalance((b) => b - 100);
    setInventory((p) => [...p, { model: gift.icon }]);
  };

  const combine = () => {
    if (!selectedGift || !selectedEffect) return;
    const count = countGift(selectedGift);
    if (count <= 0) return alert("–ù–µ—Ç –ø–æ–¥–∞—Ä–∫–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è!");
    setInventory((prev) => {
      const idx = prev.findIndex(
        (g) => g.model === selectedGift.icon && !g.effect
      );
      if (idx >= 0) prev.splice(idx, 1);
      return [...prev];
    });
    setBalance((b) => b - selectedEffect.price);
    setFusion(selectedEffect);
    setTimeout(() => {
      setFusion(null);
      const rare = true;
      const newGift = { model: selectedGift.icon, effect: selectedEffect, rare };
      setInventory((prev) => [...prev, newGift]);
      setResult(newGift);
    }, 2000);
  };

  const sell = (index) => {
    const gift = inventory[index];
    const price = 200;
    setInventory((prev) => prev.filter((_, i) => i !== index));
    setBalance((b) => b + price);
  };

  const filtered = tab === "–æ–±—ã—á–Ω—ã–µ"
    ? inventory.filter(i => !i.rare)
    : inventory.filter(i => i.rare);

  return (
    <div className="app">
      <div className="top">
        <div>Gift Evolution ‚ú®</div>
        <div className="balance">‚≠ê {balance}</div>
      </div>

      {screen === "main" && (
        <div className="main">
          <div className="effects">
            {EFFECTS.map((e,i)=>(
              <div key={i}
                className={`effect ${selectedEffect===e?"selected":""}`}
                onClick={()=>setSelectedEffect(e)}>
                {e.icon} {e.name}<br/>{e.price}‚≠ê
              </div>
            ))}
          </div>

          <div className="gifts">
            {GIFTS.map(gift=>{
              const owned = countGift(gift);
              return (
                <div key={gift.id} className="gift" onClick={()=>setSelectedGift(gift)}>
                  <div style={{fontSize:"40px"}}>{gift.icon}</div>
                  <button className="gift-btn"
                    onClick={(e)=>{
                      e.stopPropagation();
                      if(owned>0)return;
                      buyGift(gift);
                    }}>
                    {owned>0?`x${owned}`:"–ö—É–ø–∏—Ç—å 100‚≠ê"}
                  </button>
                </div>
              )
            })}
            <div className="gift" style={{opacity:.3, fontSize:"12px"}}>Coming soon...</div>
          </div>

          <button className="combine" disabled={!(selectedGift && selectedEffect)} onClick={combine}>
            –û–±—ä–µ–¥–∏–Ω–∏—Ç—å
          </button>
        </div>
      )}

      {screen === "inventory" && (
        <div className="inventory no-scrollbar">
          <div className="tabs">
            <div className={`tab ${tab==="–æ–±—ã—á–Ω—ã–µ"?"active":""}`} onClick={()=>setTab("–æ–±—ã—á–Ω—ã–µ")}>–û–±—ã—á–Ω—ã–µ</div>
            <div className={`tab ${tab==="—Ä–µ–¥–∫–∏–µ"?"active":""}`} onClick={()=>setTab("—Ä–µ–¥–∫–∏–µ")}>–†–µ–¥–∫–∏–µ</div>
          </div>
          <div className="inv-list">
            {filtered.length===0 && <p style={{opacity:.6,textAlign:"center"}}>–ü—É—Å—Ç–æ...</p>}
            {filtered.map((g,i)=>(
              <div key={i} className="inv-item">
                <div style={{fontSize:"36px"}}>{g.model} {g.rare?"üíé":""}</div>
                {g.effect && <div>{g.effect.icon} {g.effect.name}</div>}
                {g.rare && <button className="sell-btn" onClick={()=>sell(i)}>–ü—Ä–æ–¥–∞—Ç—å üí∞</button>}
              </div>
            ))}
          </div>
        </div>
      )}

      {fusion && (
        <div className="fusion">
          <div className="pulse" style={{background:fusion.color}}></div>
          <h2>‚ú® –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ... ‚ú®</h2>
        </div>
      )}

      {result && (
        <div className="result" onClick={()=>setResult(null)}>
          <div style={{fontSize:"48px"}}>{result.model} üíé</div>
          <h3>{result.effect.icon} {result.effect.name}</h3>
          <p>–ü–æ–ª—É—á–µ–Ω —Ä–µ–¥–∫–∏–π –ø–æ–¥–∞—Ä–æ–∫!</p>
        </div>
      )}

      <div className="bottom">
        <div className={`nav-btn ${screen==="main"?"active":""}`} onClick={()=>setScreen("main")}>–ì–ª–∞–≤–Ω–∞—è</div>
        <div className={`nav-btn ${screen==="inventory"?"active":""}`} onClick={()=>setScreen("inventory")}>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
