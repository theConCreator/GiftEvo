<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Shorts Simulator</title>
    <style>
        @import url('https://fonts.cdnfonts.com/css/minecraft-ia');

        body {
            background: #000;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Minecraftia', sans-serif;
            overflow: hidden;
            color: white;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Å—Ç–∏–ª–µ YouTube Shorts */
        #shorts-container {
            width: 360px;
            height: 740px;
            background: #1a1a1a;
            position: relative;
            border: 2px solid #333;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* –®–∞–ø–∫–∞ –≤–∏–¥–µ–æ */
        .overlay-text {
            position: absolute;
            top: 100px;
            width: 100%;
            text-align: center;
            font-size: 32px;
            z-index: 10;
            pointer-events: none;
            text-shadow: 3px 3px 0 #000;
        }

        /* –ü–æ–ª–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ 3x5 */
        #inventory-gui {
            margin-top: 160px;
            background: #8B8B8B;
            border: 4px solid #373737;
            display: grid;
            grid-template-columns: repeat(5, 52px);
            grid-template-rows: repeat(3, 52px);
            gap: 4px;
            padding: 6px;
            box-shadow: inset -3px -3px 0 #555, inset 3px 3px 0 #FFF;
            z-index: 5;
        }

        .slot {
            background: #8B8B8B;
            border: 2px solid #373737;
            box-shadow: inset -2px -2px 0 #545454;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        /* –ú–∏—Ä –±–ª–æ–∫–æ–≤ */
        #world {
            position: relative;
            width: 300px;
            height: 300px;
            background: rgba(0,0,0,0.2);
            margin-top: 20px;
            border-bottom: 4px solid #555;
        }

        .block {
            position: absolute;
            width: 60px;
            height: 60px;
            background-size: cover;
            image-rendering: pixelated;
            box-sizing: border-box;
            border: 1px solid rgba(0,0,0,0.1);
        }

        /* –¢–µ–∫—Å—Ç—É—Ä—ã –±–ª–æ–∫–æ–≤ (—É–ø—Ä–æ—â–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞) */
        .stone { background: #7a7a7a; border-bottom: 4px solid #444; }
        .dirt { background: #866043; border-bottom: 4px solid #5d4037; }
        .ore-red { background: #7a7a7a; border: 4px solid #ff0000; }
        .ore-gold { background: #7a7a7a; border: 4px solid #ffd700; }
        .chest { background: #a0522d; border: 4px solid #5d2f0d; }

        /* –ö–Ω–æ–ø–∫–∞ Spin */
        #spin-btn {
            position: absolute;
            bottom: 80px;
            width: 200px;
            height: 50px;
            background: #5c9e31;
            border: none;
            border-bottom: 4px solid #3a631f;
            color: white;
            font-family: 'Minecraftia', sans-serif;
            cursor: pointer;
            z-index: 20;
        }

        #spin-btn:active { transform: translateY(2px); border-bottom: 2px solid #3a631f; }

        /* –ò–∫–æ–Ω–∫–∏ —Å–±–æ–∫—É (–∫–∞–∫ –≤ YouTube) */
        .sidebar {
            position: absolute;
            right: 10px;
            bottom: 150px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }
        .icon-mock { width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 50%; }

    </style>
</head>
<body>

<div id="shorts-container">
    <div class="overlay-text">–ë–û–ù–£–°–ö–ê –° –¢–†–ò–°–¢–ê</div>

    <div id="inventory-gui"></div>

    <div id="world"></div>

    <button id="spin-btn" onclick="startBonus()">–ö–†–£–¢–ò–¢–¨</button>

    <div class="sidebar">
        <div class="icon-mock"></div>
        <span>6</span>
        <div class="icon-mock"></div>
        <span>0</span>
        <div class="icon-mock"></div>
    </div>
</div>

<script>
    const invGui = document.getElementById('inventory-gui');
    const world = document.getElementById('world');
    const COLS = 5;
    const ROWS = 5;
    const BLOCK_SIZE = 60;
    const GRAVITY = 0.4;
    const BOUNCE = -0.2;

    let blocks = [];
    let isSpinning = false;

    // –°–æ–∑–¥–∞–µ–º —Å–ª–æ—Ç—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
    for(let i=0; i<15; i++) {
        const slot = document.createElement('div');
        slot.className = 'slot';
        invGui.appendChild(slot);
    }

    // –ö–ª–∞—Å—Å –ë–ª–æ–∫–∞
    class Block {
        constructor(x, y, type) {
            this.x = x;
            this.y = y;
            this.targetY = y;
            this.vy = 0;
            this.type = type;
            this.el = document.createElement('div');
            this.el.className = `block ${type}`;
            this.updatePosition();
            world.appendChild(this.el);
        }

        updatePosition() {
            this.el.style.left = this.x + 'px';
            this.el.style.top = this.y + 'px';
        }

        applyPhysics(indexY) {
            let floorY = indexY * BLOCK_SIZE;
            if (this.y < floorY) {
                this.vy += GRAVITY;
                this.y += this.vy;
            }

            if (this.y >= floorY) {
                this.y = floorY;
                if (Math.abs(this.vy) > 1) {
                    this.vy *= BOUNCE; // –ù–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å–∫–æ–∫
                } else {
                    this.vy = 0;
                }
            }
            this.updatePosition();
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—è
    function init() {
        for(let c=0; c<COLS; c++) {
            blocks[c] = [];
            for(let r=0; r<ROWS; r++) {
                let type = 'stone';
                if(r === 4) type = 'chest';
                else if(Math.random() > 0.8) type = 'ore-red';
                
                blocks[c].push(new Block(c * BLOCK_SIZE, r * BLOCK_SIZE, type));
            }
        }
    }

    // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª –¥–ª—è —Ñ–∏–∑–∏–∫–∏
    function gameLoop() {
        for(let c=0; c<COLS; c++) {
            for(let r=0; r<blocks[c].length; r++) {
                blocks[c][r].applyPhysics(r);
            }
        }
        requestAnimationFrame(gameLoop);
    }

    async function startBonus() {
        if(isSpinning) return;
        isSpinning = true;

        const tools = ['‚õèÔ∏è', 'üí£', 'üî®', ''];
        const slots = document.querySelectorAll('.slot');
        
        // 1. –†–∞–Ω–¥–æ–º –≤ —Å–ª–æ—Ç–∞—Ö
        slots.forEach(s => {
            const item = Math.random() > 0.6 ? tools[Math.floor(Math.random()*tools.length)] : '';
            s.innerText = item;
        });

        // 2. –õ–æ–≥–∏–∫–∞ —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è
        for(let row = 0; row < 3; row++) {
            for(let col = 0; col < 5; col++) {
                const item = slots[row * 5 + col].innerText;
                if(item) {
                    slots[row * 5 + col].style.background = '#FFF';
                    await processTool(item, col);
                    await new Promise(r => setTimeout(r, 100));
                    slots[row * 5 + col].style.background = '#8B8B8B';
                }
            }
        }
        isSpinning = false;
    }

    async function processTool(tool, col) {
        if(blocks[col].length === 0) return;

        let destroyCount = 1;
        if(tool === 'üí£') destroyCount = 3;
        
        for(let i=0; i < destroyCount; i++) {
            if(blocks[col][0]) {
                const b = blocks[col].shift();
                b.el.style.transform = 'scale(0)';
                setTimeout(() => b.el.remove(), 200);
            }
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –±–ª–æ–∫–∏ —Å–≤–µ—Ä—Ö—É
        while(blocks[col].length < ROWS) {
            const types = ['stone', 'dirt', 'ore-gold'];
            const newB = new Block(col * BLOCK_SIZE, -100, types[Math.floor(Math.random()*types.length)]);
            blocks[col].push(newB); // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω–µ—Ü –º–∞—Å—Å–∏–≤–∞ (–Ω–∏–∑), –Ω–æ —Ñ–∏–∑–∏–∫–∞ –ø–æ–¥–Ω–∏–º–µ—Ç –∏—Ö
        }
        
        // –ü–µ—Ä–µ—Å–æ—Ä—Ç–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤, —á—Ç–æ–±—ã –Ω–æ–≤—ã–µ –±–ª–æ–∫–∏ –±—ã–ª–∏ "—Å–≤–µ—Ä—Ö—É"
        // (–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏: –±–ª–æ–∫–∏ –≤ –Ω–∞—á–∞–ª–µ –º–∞—Å—Å–∏–≤–∞ - –Ω–∏–∂–Ω–∏–µ)
        // –ù–æ –≤ –Ω–∞—à–µ–π –ª–æ–≥–∏–∫–µ: index 0 - —ç—Ç–æ –≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫.
    }

    init();
    gameLoop();
</script>

</body>
</html>