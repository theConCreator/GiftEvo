<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gift Evolution</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Inter", sans-serif; }
    body, html { width: 100%; height: 100%; background: radial-gradient(circle at top, #050505, #000); color: #fff; overflow: hidden; }

    #root { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }

    .app { position: relative; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: space-between; padding: 16px; }

    header { display: flex; justify-content: space-between; align-items: center; font-size: 1.2rem; font-weight: 600; text-shadow: 0 0 8px #0ff; }

    .main { flex: 1; display: flex; justify-content: space-between; align-items: center; }

    .gifts-column {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      gap: 20px; width: 40%; height: 100%;
    }

    .gift-card {
      background: rgba(30, 30, 30, 0.8);
      border: 2px solid transparent;
      background-clip: padding-box;
      border-radius: 16px;
      width: 140px; height: 140px;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      position: relative; cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .gift-card:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
      border-image: linear-gradient(45deg, #0ff, #f0f, #ff00ff) 1;
    }

    .gift-name { font-size: 0.9rem; margin-top: 8px; text-align: center; }

    .gift-info {
      position: absolute;
      bottom: 4px;
      font-size: 0.75rem;
      color: #aaa;
      text-align: center;
    }

    .effects-panel {
      position: absolute;
      bottom: 70px;
      left: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .effect-btn {
      background: linear-gradient(90deg, #ff00ff, #00ffff);
      color: #fff;
      padding: 10px 14px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      box-shadow: 0 0 10px rgba(255, 0, 255, 0.4);
      transition: transform 0.2s, box-shadow 0.3s;
    }

    .effect-btn:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(0, 255, 255, 0.6); }

    footer {
      position: fixed; bottom: 0; left: 0; width: 100%;
      display: flex; justify-content: space-around; align-items: center;
      background: rgba(15, 15, 15, 0.9);
      padding: 10px 0; border-top: 1px solid #222;
      backdrop-filter: blur(6px);
    }

    .tab-btn {
      flex: 1; background: none; border: none; color: #888; font-size: 1rem;
      font-weight: 600; cursor: pointer; transition: color 0.3s;
    }

    .tab-btn.active { color: #0ff; text-shadow: 0 0 8px #0ff; }

    .inventory {
      display: flex; flex-direction: column; align-items: center;
      justify-content: flex-start; gap: 16px; height: calc(100% - 60px); overflow-y: auto;
      padding-top: 20px;
    }

    .inventory h2 { color: #0ff; margin-bottom: 10px; }

    .inv-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 16px; width: 100%; max-width: 600px;
    }

    .inv-card {
      background: rgba(30, 30, 30, 0.8); border: 2px solid #0ff;
      border-radius: 12px; padding: 10px; text-align: center;
      box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
    }

    .modal {
      position: fixed; inset: 0; background: rgba(0,0,0,0.7);
      display: flex; justify-content: center; align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: #111; border: 2px solid #0ff; border-radius: 16px;
      padding: 24px; text-align: center; box-shadow: 0 0 20px rgba(0,255,255,0.5);
    }

    .modal button {
      margin-top: 12px; background: linear-gradient(45deg, #00ffff, #ff00ff);
      border: none; padding: 10px 16px; border-radius: 8px; color: white; cursor: pointer;
      font-weight: 600;
    }
  </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">

const giftsData = [
  { name: "Desk Calendar", price: 230 },
  { name: "Ginger Cookie", price: 362 },
  { name: "Spy Aragic", price: 600 },
  { name: "Party Sparkler", price: 360 },
  { name: "Star Notepad", price: 425 }
];

const effects = [
  { name: "–û–≥–æ–Ω—å", emoji: "üî•", key: "fire" },
  { name: "–ú–æ–ª–Ω–∏—è", emoji: "‚ö°", key: "lightning" },
  { name: "–ö—Ä–æ–≤—å", emoji: "ü©∏", key: "blood" },
  { name: "–ß—ë—Ä–Ω—ã–π", emoji: "‚ö´", key: "black" },
  { name: "–ó–æ–ª–æ—Ç–æ", emoji: "üí∞", key: "gold" },
  { name: "Pepe", emoji: "üê∏", key: "pepe" }
];

function GiftCard({ gift, count, onClick }) {
  const [animationLoaded, setAnimationLoaded] = React.useState(false);
  const containerRef = React.useRef(null);

  React.useEffect(() => {
    const path = `${gift.name}/${gift.name}.json`;
    fetch(path)
      .then(res => {
        if (!res.ok) throw new Error();
        return res.json();
      })
      .then(data => {
        const anim = lottie.loadAnimation({
          container: containerRef.current,
          renderer: "svg",
          loop: false,
          autoplay: true,
          animationData: data
        });
        anim.addEventListener("DOMLoaded", () => setAnimationLoaded(true));
        return () => anim.destroy();
      })
      .catch(() => setAnimationLoaded(false));
  }, [gift.name]);

  return (
    <div className="gift-card" onClick={onClick}>
      <div style={{ width: 80, height: 80 }} ref={containerRef}>
        {!animationLoaded && <div style={{ color: "#555", textAlign: "center", paddingTop: "30px" }}>–Ω–µ—Ç —Ñ–∞–π–ª–∞</div>}
      </div>
      <div className="gift-name">{gift.name}</div>
      <div className="gift-info">
        {count > 0 ? `x${count}` : `–ö—É–ø–∏—Ç—å: ${gift.price}‚≠ê`}
      </div>
    </div>
  );
}

function App() {
  const [tab, setTab] = React.useState("main");
  const [stars, setStars] = React.useState(1000);
  const [inventory, setInventory] = React.useState({});
  const [modal, setModal] = React.useState(null);

  const buyGift = (gift) => {
    if (stars < gift.price) {
      setModal({ text: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥!" });
      return;
    }
    setStars(stars - gift.price);
    setInventory({ ...inventory, [gift.name]: (inventory[gift.name] || 0) + 1 });
    setModal({ text: `–í—ã –∫—É–ø–∏–ª–∏ ${gift.name}!` });
  };

  const sellRare = (gift) => {
    setStars(stars + 300); // –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ü–µ–Ω–∞
    const updated = { ...inventory };
    updated[gift] = Math.max((updated[gift] || 1) - 1, 0);
    setInventory(updated);
  };

  return (
    <div className="app">
      <header>
        <div>Gift Evolution</div>
        <div>{stars}‚≠ê</div>
      </header>

      {tab === "main" && (
        <div className="main">
          <div className="effects-panel">
            {effects.map(e => (
              <button key={e.key} className="effect-btn">
                {e.emoji} {e.name}
              </button>
            ))}
          </div>

          <div className="gifts-column">
            {giftsData.map(g => (
              <GiftCard
                key={g.name}
                gift={g}
                count={inventory[g.name] || 0}
                onClick={() => {
                  if (!inventory[g.name]) buyGift(g);
                  else setModal({ text: `${g.name} –≤—ã–±—Ä–∞–Ω –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è!` });
                }}
              />
            ))}
          </div>
        </div>
      )}

      {tab === "inventory" && (
        <div className="inventory">
          <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
          <div className="inv-grid">
            {Object.entries(inventory).length === 0 && <p>–ü–æ–∫–∞ –ø—É—Å—Ç–æ...</p>}
            {Object.entries(inventory).map(([name, count]) => (
              <div className="inv-card" key={name}>
                <strong>{name}</strong>
                <p>x{count}</p>
                <button onClick={() => sellRare(name)}>–ü—Ä–æ–¥–∞—Ç—å</button>
              </div>
            ))}
          </div>
        </div>
      )}

      <footer>
        <button className={`tab-btn ${tab === "main" ? "active" : ""}`} onClick={() => setTab("main")}>–ì–ª–∞–≤–Ω–∞—è</button>
        <button className={`tab-btn ${tab === "inventory" ? "active" : ""}`} onClick={() => setTab("inventory")}>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
      </footer>

      {modal && (
        <div className="modal" onClick={() => setModal(null)}>
          <div className="modal-content">
            <p>{modal.text}</p>
            <button onClick={() => setModal(null)}>–û–ö</button>
          </div>
        </div>
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
