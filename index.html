<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Gift Evolution</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: radial-gradient(circle at center, #0b0b0b, #000);
    font-family: "Inter", sans-serif;
    color: #fff;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .app-container {
    width: 100%;
    max-width: 480px;
    height: 100vh;
    max-height: 850px;
    background: linear-gradient(180deg, #141414, #1e1e1e);
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(232, 67, 147, 0.3);
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
  }

  .screen {
    flex: 1;
    display: none;
    flex-direction: column;
    padding: 16px;
    position: relative;
  }

  .screen.active {
    display: flex;
  }

  .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    font-size: 18px;
    margin-bottom: 8px;
  }

  .balance {
    background: rgba(255, 255, 255, 0.1);
    padding: 6px 12px;
    border-radius: 12px;
  }

  .main-content {
    flex: 1;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    position: relative;
  }

  .gift-list {
    position: absolute;
    right: 10px;
    bottom: 110px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    align-items: flex-end;
  }

  .gift-card {
    width: clamp(80px, 22vw, 100px);
    height: clamp(80px, 22vw, 100px);
    border-radius: 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.2);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: 0.3s;
    position: relative;
  }

  .gift-card:hover {
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(232, 67, 147, 0.3);
  }

  .gift-icon {
    font-size: clamp(36px, 8vw, 44px);
    cursor: pointer;
  }

  .gift-btn {
    margin-top: 6px;
    width: 90%;
    padding: 5px;
    font-size: clamp(10px, 3vw, 13px);
    border: none;
    border-radius: 10px;
    background: #e84393;
    color: white;
    cursor: pointer;
    transition: 0.3s;
  }

  .gift-btn:hover {
    background: #ff5fa3;
  }

  .effects-bar {
    position: absolute;
    bottom: 70px;
    left: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    width: 60%;
  }

  .effect-card {
    flex: 1 1 calc(50% - 8px);
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 10px;
    padding: 8px;
    text-align: center;
    cursor: pointer;
    transition: 0.25s;
    font-size: clamp(12px, 3vw, 14px);
  }

  .effect-card:hover {
    background: rgba(255, 255, 255, 0.12);
    transform: translateY(-2px);
  }

  .effect-card.selected {
    border-color: #e84393;
    box-shadow: 0 0 12px #e84393;
  }

  .combine-btn {
    position: absolute;
    bottom: 12px;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    padding: 12px;
    font-size: clamp(16px, 4vw, 18px);
    background: #e84393;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.3s;
  }

  .combine-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .bottom-nav {
    display: flex;
    justify-content: space-around;
    background: rgba(20, 20, 20, 0.95);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  .nav-btn {
    flex: 1;
    text-align: center;
    padding: 12px 0;
    color: #aaa;
    cursor: pointer;
    transition: 0.3s;
    font-size: clamp(14px, 3.5vw, 16px);
  }

  .nav-btn.active {
    color: #e84393;
    font-weight: 600;
  }

  .inventory-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 14px;
    padding: 10px;
    overflow-y: auto;
  }

  .inventory-card {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 12px;
    text-align: center;
    transition: 0.3s;
  }

  .inventory-card:hover {
    transform: scale(1.05);
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.15);
  }

  .sell-btn {
    margin-top: 6px;
    width: 100%;
    padding: 6px;
    border: none;
    border-radius: 8px;
    background: #28a745;
    color: white;
    cursor: pointer;
    font-size: 13px;
    transition: 0.3s;
  }

  .sell-btn:hover {
    background: #34d058;
  }

  .fusion-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 100;
  }

  .fusion-glow {
    position: absolute;
    width: 500px;
    height: 500px;
    border-radius: 50%;
    filter: blur(160px);
    opacity: 0.8;
    animation: pulse 1.2s ease-in-out infinite alternate;
  }

  @keyframes pulse {
    from { transform: scale(0.9); opacity: 0.5; }
    to { transform: scale(1.1); opacity: 1; }
  }

  .result-modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(30, 30, 30, 0.95);
    border: 2px solid #e84393;
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    z-index: 101;
    width: 260px;
    box-shadow: 0 0 20px rgba(232, 67, 147, 0.4);
    animation: pop 0.3s ease-out;
  }

  @keyframes pop {
    from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
    to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  }

  .tabs {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 12px;
  }

  .tab {
    padding: 8px 16px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    cursor: pointer;
  }

  .tab.active {
    background: #e84393;
  }
</style>
</head>
<body>
<div id="root"></div>

<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
const { useState, useEffect } = React;

const GIFT_MODELS = [
  { id: 1, icon: "üéÅ" },
  { id: 2, icon: "üéÄ" },
  { id: 3, icon: "ü™Ñ" },
  { id: 4, icon: "üß∏" },
  { id: 5, icon: "üõçÔ∏è" },
];

const EFFECTS = [
  { name: "–û–≥–æ–Ω—å", icon: "üî•", price: 75, color: "#ff4500" },
  { name: "–ú–æ–ª–Ω–∏—è", icon: "‚ö°", price: 100, color: "#ffd700" },
  { name: "–ö—Ä–æ–≤—å", icon: "ü©∏", price: 125, color: "#8b0000" },
  { name: "–ß—ë—Ä–Ω—ã–π", icon: "‚ö´", price: 200, color: "#4b0082" },
  { name: "–ó–æ–ª–æ—Ç–æ", icon: "ü™ô", price: 250, color: "#ffd700" },
  { name: "Pepe", icon: "üê∏", price: 500, color: "#32cd32" },
];

function App() {
  const [screen, setScreen] = useState("main");
  const [inventory, setInventory] = useState([]);
  const [balance, setBalance] = useState(1000);
  const [selectedGift, setSelectedGift] = useState(null);
  const [selectedEffect, setSelectedEffect] = useState(null);
  const [showFusion, setShowFusion] = useState(false);
  const [result, setResult] = useState(null);
  const [tab, setTab] = useState("–æ–±—ã—á–Ω—ã–µ");

  const countGift = (gift) =>
    inventory.filter((g) => g.model === gift.icon && !g.effect).length;

  const handleBuyGift = (gift) => {
    if (balance < 100) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥!");
    setBalance((b) => b - 100);
    setInventory((prev) => [...prev, { model: gift.icon }]);
  };

  const handleCombine = () => {
    if (!selectedGift || !selectedEffect) return;
    const count = countGift(selectedGift);
    if (count <= 0) return alert("–ù–µ—Ç –ø–æ–¥–∞—Ä–∫–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è!");
    setInventory((prev) => {
      const idx = prev.findIndex(
        (g) => g.model === selectedGift.icon && !g.effect
      );
      if (idx >= 0) prev.splice(idx, 1);
      return [...prev];
    });
    setBalance((b) => b - selectedEffect.price);
    setShowFusion(true);
    setTimeout(() => {
      setShowFusion(false);
      const isRare = Math.random() < 0.2;
      const giftResult = {
        model: selectedGift.icon,
        effect: selectedEffect,
        rare: isRare,
      };
      setResult(giftResult);
      setInventory((prev) => [...prev, giftResult]);
    }, 2000);
  };

  const handleSell = (index) => {
    const gift = inventory[index];
    if (!gift.rare) return;
    const sellPrice = 200; // –≤—Ä–µ–º–µ–Ω–Ω–æ —Ñ–∏–∫—Å
    setInventory((prev) => prev.filter((_, i) => i !== index));
    setBalance((b) => b + sellPrice);
  };

  const filteredInventory =
    tab === "–æ–±—ã—á–Ω—ã–µ"
      ? inventory.filter((i) => !i.rare)
      : inventory.filter((i) => i.rare);

  return (
    <div className="app-container">
      <div className={`screen ${screen === "main" ? "active" : ""}`}>
        <div className="top-bar">
          <div>Gift Evolution üéÅ</div>
          <div className="balance">‚≠ê {balance}</div>
        </div>
        <div className="main-content">
          <div className="effects-bar">
            {EFFECTS.map((e, i) => (
              <div
                key={i}
                className={`effect-card ${
                  selectedEffect === e ? "selected" : ""
                }`}
                onClick={() => setSelectedEffect(e)}
              >
                {e.icon} {e.name} {e.price}‚≠ê
              </div>
            ))}
          </div>

          <div className="gift-list">
            {GIFT_MODELS.map((gift) => {
              const ownedCount = countGift(gift);
              return (
                <div key={gift.id} className="gift-card">
                  <div
                    className="gift-icon"
                    onClick={() => setSelectedGift(gift)}
                  >
                    {gift.icon}
                  </div>
                  <button
                    className="gift-btn"
                    onClick={() =>
                      ownedCount > 0 ? null : handleBuyGift(gift)
                    }
                  >
                    {ownedCount > 0 ? `x${ownedCount}` : "–ö—É–ø–∏—Ç—å 100‚≠ê"}
                  </button>
                </div>
              );
            })}
            <div
              className="gift-card"
              style={{
                opacity: 0.3,
                fontSize: "14px",
                justifyContent: "center",
              }}
            >
              Coming soon...
            </div>
          </div>
          <button
            className="combine-btn"
            disabled={!(selectedGift && selectedEffect)}
            onClick={handleCombine}
          >
            –û–±—ä–µ–¥–∏–Ω–∏—Ç—å
          </button>
        </div>
      </div>

      <div className={`screen ${screen === "inventory" ? "active" : ""}`}>
        <div className="top-bar">
          <div>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
          <div className="balance">‚≠ê {balance}</div>
        </div>
        <div className="tabs">
          <div
            className={`tab ${tab === "–æ–±—ã—á–Ω—ã–µ" ? "active" : ""}`}
            onClick={() => setTab("–æ–±—ã—á–Ω—ã–µ")}
          >
            –û–±—ã—á–Ω—ã–µ
          </div>
          <div
            className={`tab ${tab === "—Ä–µ–¥–∫–∏–µ" ? "active" : ""}`}
            onClick={() => setTab("—Ä–µ–¥–∫–∏–µ")}
          >
            –†–µ–¥–∫–∏–µ
          </div>
        </div>
        <div className="inventory-list">
          {filteredInventory.length === 0 && (
            <p style={{ opacity: 0.7, textAlign: "center" }}>–ü—É—Å—Ç–æ...</p>
          )}
          {filteredInventory.map((item, i) => (
            <div key={i} className="inventory-card">
              <div style={{ fontSize: "36px" }}>
                {item.model} {item.rare ? "üíé" : ""}
              </div>
              {item.effect && (
                <div>
                  {item.effect.icon} {item.effect.name}
                </div>
              )}
              {item.rare && (
                <button className="sell-btn" onClick={() => handleSell(i)}>
                  –ü—Ä–æ–¥–∞—Ç—å üí∞
                </button>
              )}
            </div>
          ))}
        </div>
      </div>

      {showFusion && <FusionOverlay effect={selectedEffect} />}
      {result && <ResultModal result={result} onClose={() => setResult(null)} />}

      <div className="bottom-nav">
        <div
          className={`nav-btn ${screen === "main" ? "active" : ""}`}
          onClick={() => setScreen("main")}
        >
          –ì–ª–∞–≤–Ω–∞—è
        </div>
        <div
          className={`nav-btn ${screen === "inventory" ? "active" : ""}`}
          onClick={() => setScreen("inventory")}
        >
          –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
        </div>
      </div>
    </div>
  );
}

function FusionOverlay({ effect }) {
  return (
    <div className="fusion-overlay">
      <div
        className="fusion-glow"
        style={{ background: effect ? effect.color : "#e84393" }}
      ></div>
      <h2 style={{ animation: "pulse 1s infinite alternate" }}>
        ‚ú® –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ... ‚ú®
      </h2>
    </div>
  );
}

function ResultModal({ result, onClose }) {
  return (
    <div className="result-modal" onClick={onClose}>
      <div style={{ fontSize: "48px" }}>
        {result.model}
        {result.rare ? "üíé" : ""}
      </div>
      <h2>
        {result.effect.icon} {result.effect.name}
      </h2>
      <p>{result.rare ? "–ü–æ–ª—É—á–µ–Ω —Ä–µ–¥–∫–∏–π –ø–æ–¥–∞—Ä–æ–∫!" : "–ü–æ–ª—É—á–µ–Ω –æ–±—ã—á–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫!"}</p>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
