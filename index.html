<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Bonus Game</title>
    <style>
        :root {
            --bg-color: #313131;
            --slot-color: #8B8B8B;
            --slot-border: #373737;
            --highlight: #ffffff;
        }

        body {
            background: #222;
            color: white;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* –û–±—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–∫ —ç–∫—Ä–∞–Ω —Ç–µ–ª–µ—Ñ–æ–Ω–∞ */
        #phone-screen {
            width: 360px;
            height: 640px;
            background: url('https://i.imgur.com/35p8oH6.png') center/cover; /* –§–æ–Ω –Ω–µ–±–∞/–∑–µ–º–ª–∏ */
            border: 8px solid #111;
            border-radius: 20px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* –ü–æ–ª–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å) */
        .inventory-ui {
            background-color: var(--slot-color);
            border: 4px solid var(--slot-border);
            margin-top: 40px;
            display: grid;
            grid-template-columns: repeat(4, 50px);
            grid-template-rows: repeat(3, 50px);
            gap: 2px;
            padding: 4px;
            box-shadow: inset -2px -2px 0 #555, inset 2px 2px 0 #fff;
        }

        .slot {
            background-color: #8B8B8B;
            border: 2px solid #373737;
            box-shadow: inset -2px -2px 0 #555;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            position: relative;
        }

        /* –ü–æ–ª–µ –±–ª–æ–∫–æ–≤ */
        #game-grid {
            position: relative;
            width: 300px;
            height: 350px;
            margin-top: 30px;
            background: rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .block {
            position: absolute;
            width: 58px;
            height: 58px;
            box-sizing: border-box;
            transition: top 0.4s cubic-bezier(0.47, 0, 0.745, 0.715);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            border: 2px solid rgba(0,0,0,0.2);
            text-shadow: 1px 1px 0 #000;
        }

        /* –¢–µ–∫—Å—Ç—É—Ä—ã –±–ª–æ–∫–æ–≤ */
        .stone { background-color: #7a7a7a; border-bottom: 4px solid #4a4a4a; }
        .redstone { background-color: #8a8a8a; color: #ff4d4d; border-bottom: 4px solid #4a4a4a; }
        .gold { background-color: #9a9a9a; color: #ffd700; border-bottom: 4px solid #4a4a4a; }
        .chest { background: #8b4513; border: 3px solid #5d2f0d; color: #ffa500; }

        /* –ö–Ω–æ–ø–∫–∞ */
        .spin-btn {
            margin-top: 20px;
            padding: 10px 40px;
            background: #5c9e31;
            border: none;
            border-bottom: 4px solid #3a631f;
            color: white;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
        }

        .spin-btn:active { transform: translateY(2px); border-bottom: 2px solid #3a631f; }
    </style>
</head>
<body>

    <div id="phone-screen">
        <div style="margin-top: 10px;">–ë–û–ù–£–°–ö–ê –ó–ê 300</div>
        
        <div class="inventory-ui" id="inventory">
            </div>

        <div id="game-grid"></div>

        <button class="spin-btn" onclick="startSpin()">–ö–†–£–¢–ò–¢–¨</button>
        <div id="balance" style="margin-top:10px">–ë–∞–ª–∞–Ω—Å: 0</div>
    </div>

<script>
    const inventory = document.getElementById('inventory');
    const grid = document.getElementById('game-grid');
    const balanceEl = document.getElementById('balance');
    
    let balance = 0;
    const ROWS = 6;
    const COLS = 5;
    const BLOCK_SIZE = 60;
    let matrix = [];

    // –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç—É—é —Å–µ—Ç–∫—É –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
    for(let i=0; i<12; i++) {
        const slot = document.createElement('div');
        slot.className = 'slot';
        slot.id = `slot-${i}`;
        inventory.appendChild(slot);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
    function initGrid() {
        for(let r=0; r<ROWS; r++) {
            matrix[r] = [];
            for(let c=0; c<COLS; c++) {
                createBlock(r, c);
            }
        }
    }

    function createBlock(r, c) {
        const types = ['stone', 'stone', 'redstone', 'gold', 'chest'];
        const type = r > 4 ? 'chest' : types[Math.floor(Math.random() * types.length)];
        
        const el = document.createElement('div');
        el.className = `block ${type}`;
        el.style.left = (c * BLOCK_SIZE) + 'px';
        el.style.top = (r * BLOCK_SIZE) + 'px';
        
        if(type === 'chest') el.innerText = 'BOX';
        if(type === 'redstone') el.innerText = 'RED';
        if(type === 'gold') el.innerText = 'GOLD';

        const blockObj = { type, el, r, c };
        matrix[r][c] = blockObj;
        grid.appendChild(el);
    }

    async function startSpin() {
        // 1. –ê–Ω–∏–º–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (—Ä–∞–Ω–¥–æ–º –≤ —Å–ª–æ—Ç–∞—Ö)
        const tools = ['‚õèÔ∏è', '‚õèÔ∏è', 'üí£', 'üìñ', '‚öîÔ∏è'];
        let results = [];
        
        for(let i=0; i<12; i++) {
            const res = Math.random() > 0.7 ? tools[Math.floor(Math.random()*tools.length)] : '';
            document.getElementById(`slot-${i}`).innerText = res;
            if(res) results.push(res);
        }

        // 2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        for(let tool of results) {
            await new Promise(r => setTimeout(r, 200));
            applyTool(tool);
        }
    }

    function applyTool(tool) {
        let targets = [];
        if(tool === '‚õèÔ∏è') targets.push(getRandomBlock());
        if(tool === 'üí£') { // –í–∑—Ä—ã–≤ –æ–±–ª–∞—Å—Ç–∏
            let center = getRandomBlock();
            targets.push(center);
            // –î–æ–±–∞–≤–∏–º —Å–æ—Å–µ–¥–µ–π –¥–ª—è TNT
        }
        if(tool === 'üìñ') balance += 100;

        targets.forEach(t => {
            if(t) destroyBlock(t.r, t.c);
        });

        applyGravity();
    }

    function getRandomBlock() {
        let activeBlocks = [];
        matrix.forEach(row => row.forEach(b => { if(b) activeBlocks.push(b) }));
        return activeBlocks[Math.floor(Math.random() * activeBlocks.length)];
    }

    function destroyBlock(r, c) {
        if(!matrix[r][c]) return;
        const block = matrix[r][c];
        
        // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤
        if(block.type === 'chest') balance += 500;
        else if(block.type === 'gold') balance += 100;
        else balance += 10;
        
        balanceEl.innerText = `–ë–∞–ª–∞–Ω—Å: ${balance}`;
        
        block.el.style.transform = 'scale(0)';
        setTimeout(() => block.el.remove(), 300);
        matrix[r][c] = null;
    }

    function applyGravity() {
        for (let c = 0; c < COLS; c++) {
            let emptySpots = 0;
            // –ò–¥–µ–º —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö
            for (let r = ROWS - 1; r >= 0; r--) {
                if (matrix[r][c] === null) {
                    emptySpots++;
                } else if (emptySpots > 0) {
                    // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –±–ª–æ–∫ –≤–Ω–∏–∑
                    const block = matrix[r][c];
                    matrix[r + emptySpots][c] = block;
                    matrix[r][c] = null;
                    block.r = r + emptySpots;
                    block.el.style.top = (block.r * BLOCK_SIZE) + 'px';
                }
            }
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –±–ª–æ–∫–∏ —Å–≤–µ—Ä—Ö—É
            for (let i = 0; i < emptySpots; i++) {
                createBlock(-1 - i, c); // –°–æ–∑–¥–∞–µ–º –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç–∫—Ä–∞–Ω–∞
                // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, —á—Ç–æ–±—ã –æ–Ω–∏ –ø–ª–∞–≤–Ω–æ —É–ø–∞–ª–∏
                setTimeout(() => {
                   const newBlock = matrix[0][c]; // –≠—Ç–æ —É–ø—Ä–æ—â–µ–Ω–Ω–æ, –ª—É—á—à–µ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –ª–æ–≥–∏–∫—É –æ—á–µ—Ä–µ–¥–∏
                   if(newBlock) newBlock.el.style.top = ( (emptySpots-1-i) * BLOCK_SIZE) + 'px';
                }, 50);
            }
        }
    }

    initGrid();
</script>
</body>
</html>